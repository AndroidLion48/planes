\section {PlanesJavaFx}

The main components of PlanesJavaFx GUI are:

\begin{itemize}
	\item LeftPane - implements the left pane
	\item RightPane - implements the right pane
	\item PlanesJavaFxApplication  - the application class as needed by JavaFx
	\item PlaneRoundJavaFx - the game engine object
\end{itemize}


\subsection {PlaneRoundJavaFx - Use of Java Native Interface}

Because the GUI is implemented with Java and the game engine with C++, we used Java Native Interface to gain access to C++ code from the Java side. 

\begin{lstlisting} 

public class PlaneRoundJavaFx {
	static {
	System.loadLibrary("libCommon"); // Load native library 
	}
	
	//creates the PlaneRound object in the game engine
	//must be called a single time	
	public native void createPlanesRound(); 
	
	//show the planes
	public native int getRowNo();
	public native int getColNo();
	public native int getPlaneNo();
	public native int getPlaneSquareType(int i, int j, int isComputer);
	
	//edit the board
	public native void movePlaneLeft(int idx);
	public native void movePlaneRight(int idx);
	public native void movePlaneUpwards(int idx);
	public native void movePlaneDownwards(int idx);
	public native void rotatePlane(int idx);
	public native void doneClicked();
	
	//play the game
	public native void playerGuess(int row, int col);
	public native boolean playerGuess_RoundEnds();
	public native boolean playerGuess_IsPlayerWinner();
	public native boolean playerGuess_ComputerMoveGenerated();
	public native int playerGuess_StatNoPlayerMoves();
	public native int playerGuess_StatNoPlayerHits();
	public native int playerGuess_StatNoPlayerMisses();
	public native int playerGuess_StatNoPlayerDead();
	public native int playerGuess_StatNoPlayerWins();
	public native int playerGuess_StatNoComputerMoves();
	public native int playerGuess_StatNoComputerHits();
	public native int playerGuess_StatNoComputerMisses();
	public native int playerGuess_StatNoComputerDead();
	public native int playerGuess_StatNoComputerWins();
	
	public native void roundEnds();
	public native void initRound();
	
	//show the guesses
	public native int getPlayerGuessesNo();
	public native int getPlayerGuessRow(int idx);
	public native int getPlayerGuessCol(int idx);
	public native int getPlayerGuessType(int idx);
	
	public native int getComputerGuessesNo();
	public native int getComputerGuessRow(int idx);
	public native int getComputerGuessCol(int idx);
	public native int getComputerGuessType(int idx);	
}


\end{lstlisting}

The class PlaneRoundJavaFx loads the libCommon library and defines a series of methods which are declared with the keyword native, that is they are implemented in a C/C++ library. The native methods represent the only method of access of the Java GUI to the Planes game engine. They do the following:

\begin{itemize}
	\item createPlanesRound() - initialize the game engine
	
	\item getRowNo() - gets the size of the game board
	\item getColNo() - gets the size of the game board
	\item getPlaneNo() - gets the plane number 
	\item getPlaneSquareType(int i, int j, int isComputer) - for a square on the game board returns what it contains: a plane head, plane, not plane, game board, outside the game board
	
	\item movePlaneLeft() - repositions the selected plane to the left
	\item movePlaneRight() - repositions the selected plane to the right
	\item movePlaneUpwards() - repositions the selected plane upwards
	\item movePlaneDownwards() - repositions the selected plane downwards
	\item rotatePlane() - rotates 90 degrees the selected plane
	\item doneClicked() - end board editing phase 
	
	\item getPlayerGuessesNo() - how many guesses has the player made
	\item getPlayerGuessRow() - coordinate of the desired player guess
	\item getPlayerGuessCol() - coordinate of the desired player guess
	\item getPlayerGuessType() - result of the desired player guess
	
	\item getComputerGuessesNo() - how many guesses has the computer made
	\item getComputerGuessRow() - coordinate of the desired computer guess
	\item getComputerGuessCol() -  coordinate of the desired computer guess
	\item getComputerGuessType() - 	result of the desired computer guess
	
	\item playerGuess(int row, int col) - communicate a guess of the player to the game engine
	\item playerGuess\_RoundEnds() - does the round end
	\item playerGuess\_IsPlayerWinner() - who won
	\item playerGuess\_ComputerMoveGenerated() - if a computer move was generated
	\item playerGuess\_StatNoPlayerMoves() - statistics about the player's moves
	\item playerGuess\_StatNoPlayerHits() - statistics about the player's moves
	\item playerGuess\_StatNoPlayerMisses() - statistics about the player's moves
	\item playerGuess\_StatNoPlayerDead() - statistics about the player's moves
	\item playerGuess\_StatNoPlayerWins() - number of wins for the player
	\item playerGuess\_StatNoComputerMoves() - statistics about the computers's moves
	\item playerGuess\_StatNoComputerHits() - statistics about the computers's moves
	\item playerGuess\_StatNoComputerMisses() - statistics about the computers's moves
	\item playerGuess\_StatNoComputerDead() - statistics about the computers's moves
	\item playerGuess\_StatNoComputerWins() - number of wins for the computer
	
	\item roundEnds() - do what is required when the round ends
	\item initRound() - do what is required to initialize a new round

\end{itemize}


